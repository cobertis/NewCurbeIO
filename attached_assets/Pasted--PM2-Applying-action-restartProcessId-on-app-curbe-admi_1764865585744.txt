[PM2] Applying action restartProcessId on app [curbe-admin](ids: [ 0 ])
[PM2] [curbe-admin](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name           â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ curbe-admin    â”‚ default     â”‚ N/A     â”‚ fork    â”‚ 888287   â”‚ 0s     â”‚ 53   â”‚ online    â”‚ 0%       â”‚ 18.8mb   â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“œ Ãšltimos 30 logs:
[TAILING] Tailing last 30 lines for [curbe-admin] process (change the value with --lines option)
/var/www/curbe/logs/pm2-err.log last 30 lines:
0|curbe-ad | 2025-12-04T16:24:31:     at ChildProcess.emit (node:events:524:28)
0|curbe-ad | 2025-12-04T16:24:31:     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
0|curbe-ad | 2025-12-04T16:24:31:     at onErrorNT (node:internal/child_process:483:16)
0|curbe-ad | 2025-12-04T16:24:31:     at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
0|curbe-ad | 2025-12-04T16:25:03: [WhatsApp] Attempt 1/3 failed for company 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7: Failed to launch the browser process! spawn /nix/store/qa9cnw4v5xkxyip6mb9kxqfq1z4x2dx1-chromium-138.0.7204.100/bin/chromium ENOENT
0|curbe-ad | 2025-12-04T16:25:03: 
0|curbe-ad | 2025-12-04T16:25:03: 
0|curbe-ad | 2025-12-04T16:25:03: TROUBLESHOOTING: https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md
0|curbe-ad | 2025-12-04T16:25:03: 
0|curbe-ad | 2025-12-04T16:25:06: [WhatsApp] Attempt 2/3 failed for company 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7: Failed to launch the browser process! spawn /nix/store/qa9cnw4v5xkxyip6mb9kxqfq1z4x2dx1-chromium-138.0.7204.100/bin/chromium ENOENT
0|curbe-ad | 2025-12-04T16:25:06: 
0|curbe-ad | 2025-12-04T16:25:06: 
0|curbe-ad | 2025-12-04T16:25:06: TROUBLESHOOTING: https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md
0|curbe-ad | 2025-12-04T16:25:06: 
0|curbe-ad | 2025-12-04T16:25:10: [WhatsApp] Attempt 3/3 failed for company 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7: Failed to launch the browser process! spawn /nix/store/qa9cnw4v5xkxyip6mb9kxqfq1z4x2dx1-chromium-138.0.7204.100/bin/chromium ENOENT
0|curbe-ad | 2025-12-04T16:25:10: 
0|curbe-ad | 2025-12-04T16:25:10: 
0|curbe-ad | 2025-12-04T16:25:10: TROUBLESHOOTING: https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md
0|curbe-ad | 2025-12-04T16:25:10: 
0|curbe-ad | 2025-12-04T16:25:10: [WhatsApp] Error initializing: Error: Failed to launch the browser process! spawn /nix/store/qa9cnw4v5xkxyip6mb9kxqfq1z4x2dx1-chromium-138.0.7204.100/bin/chromium ENOENT
0|curbe-ad | 2025-12-04T16:25:10: 
0|curbe-ad | 2025-12-04T16:25:10: 
0|curbe-ad | 2025-12-04T16:25:10: TROUBLESHOOTING: https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md
0|curbe-ad | 2025-12-04T16:25:10: 
0|curbe-ad | 2025-12-04T16:25:10:     at onClose (/var/www/curbe/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserRunner.js:299:20)
0|curbe-ad | 2025-12-04T16:25:10:     at ChildProcess.<anonymous> (/var/www/curbe/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserRunner.js:293:24)
0|curbe-ad | 2025-12-04T16:25:10:     at ChildProcess.emit (node:events:524:28)
0|curbe-ad | 2025-12-04T16:25:10:     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
0|curbe-ad | 2025-12-04T16:25:10:     at onErrorNT (node:internal/child_process:483:16)
0|curbe-ad | 2025-12-04T16:25:10:     at process.processTicksAndRejections (node:internal/process/task_queues:82:21)

/var/www/curbe/logs/pm2-out.log last 30 lines:
0|curbe-ad | 2025-12-04T16:25:07: [WebSocket] Rejecting upgrade without valid session
0|curbe-ad | 2025-12-04T16:25:07: [WebSocket] Rejecting upgrade without valid session
0|curbe-ad | 2025-12-04T16:25:08: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:08: 4:25:08 PM [express] GET /api/whatsapp/status 304 in 7ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:09: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:09: 4:25:09 PM [express] GET /api/whatsapp/status 304 in 5ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:10: [WhatsApp] Initialization attempt 3/3 for company: 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7
0|curbe-ad | 2025-12-04T16:25:10: 4:25:10 PM [express] POST /api/whatsapp/init 500 in 7595ms :: {"success":false,"error":"Failed to inâ€¦
0|curbe-ad | 2025-12-04T16:25:14: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:14: 4:25:14 PM [express] GET /api/whatsapp/status 304 in 7ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:15: [WebSocket] Client disconnected
0|curbe-ad | 2025-12-04T16:25:17: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:17: 4:25:17 PM [express] GET /api/whatsapp/status 304 in 6ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:17: [WebSocket] Accepting authenticated connection for path: /ws/chat
0|curbe-ad | 2025-12-04T16:25:17: [WebSocket] Authenticated: userId=5fa52b5d-bab3-4d77-b30b-4e9f9832a9ad, companyId=b5325600-9bf9-4eae-b34a-87d6ab2f5fb2, role=admin
0|curbe-ad | 2025-12-04T16:25:20: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:20: 4:25:20 PM [express] GET /api/whatsapp/status 304 in 6ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:23: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:23: 4:25:23 PM [express] GET /api/whatsapp/status 304 in 6ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:26: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:26: 4:25:26 PM [express] GET /api/whatsapp/status 304 in 6ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:29: [WhatsApp] Health check: No active sessions
0|curbe-ad | 2025-12-04T16:25:29: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:29: 4:25:29 PM [express] GET /api/whatsapp/status 304 in 6ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:32: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:32: 4:25:32 PM [express] GET /api/whatsapp/status 304 in 6ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:35: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-ad | 2025-12-04T16:25:35: 4:25:35 PM [express] GET /api/whatsapp/status 304 in 6ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-ad | 2025-12-04T16:25:38: [WebSocket] Rejecting upgrade without valid session
0|curbe-ad | 2025-12-04T16:25:38: [WebSocket] Rejecting upgrade without valid session

0|curbe-admin  | 2025-12-04T16:25:39: 
0|curbe-admin  | 2025-12-04T16:25:39: > rest-express@1.0.0 start
0|curbe-admin  | 2025-12-04T16:25:39: > NODE_ENV=production node dist/index.js
0|curbe-admin  | 2025-12-04T16:25:39: 
0|curbe-admin  | 2025-12-04T16:25:40: [2025-12-04 16:25:40] DEBUG Creating transport: nodemailer (7.0.9; +https://nodemailer.com/; SMTP/7.0.9[client:7.0.9])
0|curbe-admin  | 2025-12-04T16:25:40: Email service initialized successfully
0|curbe-admin  | 2025-12-04T16:25:40: Twilio service initialized successfully
0|curbe-admin  | 2025-12-04T16:25:40: ==========================================
0|curbe-admin  | 2025-12-04T16:25:40: ğŸ”‘ STRIPE INITIALIZED: TEST MODE
0|curbe-admin  | 2025-12-04T16:25:40: ğŸ”‘ Key prefix: sk_test_51Rg...
0|curbe-admin  | 2025-12-04T16:25:40: ==========================================
0|curbe-admin  | 2025-12-04T16:25:40: [WhatsApp] Multi-tenant WhatsApp service initialized
0|curbe-admin  | 2025-12-04T16:25:40: 4:25:40 PM [express] serving on port 5000
0|curbe-admin  | 2025-12-04T16:25:40: [Campaign Studio] Running data backfill...
0|curbe-admin  | 2025-12-04T16:25:40: [REMINDER SCHEDULER] Starting scheduler...
0|curbe-admin  | 2025-12-04T16:25:40: [REMINDER SCHEDULER] Scheduler started successfully
0|curbe-admin  | 2025-12-04T16:25:40: [BIRTHDAY SCHEDULER] Starting scheduler...
0|curbe-admin  | 2025-12-04T16:25:40: [BIRTHDAY SCHEDULER] Scheduler started successfully (runs hourly at :00)
0|curbe-admin  | 2025-12-04T16:25:40: [CAMPAIGN PROCESSOR] Starting processor...
0|curbe-admin  | 2025-12-04T16:25:40: [CAMPAIGN PROCESSOR] Processor started (runs every 10 seconds)
0|curbe-admin  | 2025-12-04T16:25:40: [ContactRegistry] Checking if auto-backfill is needed...
0|curbe-admin  | 2025-12-04T16:25:40: [FFmpeg] NOT FOUND - audio conversion will fail!
0|curbe-admin  | 2025-12-04T16:25:40: [FFmpeg] Install with: packager_tool install system ["ffmpeg"]
0|curbe-admin  | 2025-12-04T16:25:40: [Campaign Studio] Fixed 0 system templates
0|curbe-admin  | 2025-12-04T16:25:40: [Campaign Studio] Fixed 0 system categories
0|curbe-admin  | 2025-12-04T16:25:40: [Campaign Studio] Fixed 0 system placeholders
0|curbe-admin  | 2025-12-04T16:25:40: [Campaign Studio] System data already exists, skipping seed
0|curbe-admin  | 2025-12-04T16:25:40: [WebSocket] Accepting authenticated connection for path: /ws/chat
0|curbe-admin  | 2025-12-04T16:25:40: [ContactRegistry] Skipping auto-backfill for company 9872cf84-5a8a-4616-aa9c-2cd7e43fbacd (The UPS Store) - 0 contacts, 0 policies (ratio 0.0:1)
0|curbe-admin  | 2025-12-04T16:25:40: [WebSocket] Authenticated: userId=d994cb38-776f-40ea-80d1-2a355e12819f, companyId=6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7, role=admin
0|curbe-admin  | 2025-12-04T16:25:40: [WebSocket] Accepting authenticated connection for path: /ws/chat
0|curbe-admin  | 2025-12-04T16:25:40: [WebSocket] Authenticated: userId=5fa52b5d-bab3-4d77-b30b-4e9f9832a9ad, companyId=b5325600-9bf9-4eae-b34a-87d6ab2f5fb2, role=admin
0|curbe-admin  | 2025-12-04T16:25:40: [ContactRegistry] Skipping auto-backfill for company b5325600-9bf9-4eae-b34a-87d6ab2f5fb2 (Cobertis Insurance) - 66 contacts, 83 policies (ratio 1.3:1)
0|curbe-admin  | 2025-12-04T16:25:40: [WebSocket] Accepting authenticated connection for path: /ws/chat
0|curbe-admin  | 2025-12-04T16:25:40: [WebSocket] Authenticated: userId=d994cb38-776f-40ea-80d1-2a355e12819f, companyId=6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7, role=admin
0|curbe-admin  | 2025-12-04T16:25:40: [ContactRegistry] Skipping auto-backfill for company 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7 (DLS Insurance Group) - 2 contacts, 2 policies (ratio 1.0:1)
0|curbe-admin  | 2025-12-04T16:25:40: [ContactRegistry] Auto-backfill check complete
0|curbe-admin  | 2025-12-04T16:25:40: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:25:40: 4:25:40 PM [express] GET /api/whatsapp/status 200 in 18ms :: {"success":true,"status":{"isReady":falâ€¦
0|curbe-admin  | 2025-12-04T16:25:42: [WhatsApp] Connection health check started (every 60s, multi-session mode)
0|curbe-admin  | 2025-12-04T16:25:42: [WhatsApp] Found 2 saved session(s) - will connect on-demand when user visits WhatsApp
0|curbe-admin  | 2025-12-04T16:25:42: [WhatsApp] Multi-session mode active: Each company can have its own concurrent session
0|curbe-admin  | 2025-12-04T16:25:44: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:25:44: 4:25:44 PM [express] GET /api/whatsapp/status 304 in 10ms :: {"success":true,"status":{"isReady":falâ€¦
0|curbe-admin  | 2025-12-04T16:25:47: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:25:47: 4:25:47 PM [express] GET /api/whatsapp/status 304 in 5ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-admin  | 2025-12-04T16:25:50: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:25:50: 4:25:50 PM [express] GET /api/whatsapp/status 304 in 5ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-admin  | 2025-12-04T16:25:50: [WebSocket] Client disconnected
0|curbe-admin  | 2025-12-04T16:25:50: [WebSocket] Client disconnected
0|curbe-admin  | 2025-12-04T16:25:51: 4:25:51 PM [express] GET /api/session 304 in 8ms :: {"user":{"id":"d994cb38-776f-40ea-80d1-2a355e128â€¦
0|curbe-admin  | 2025-12-04T16:25:51: [BILLING] Subscription query for company: 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7 Result: {
0|curbe-admin  | 2025-12-04T16:25:51:   id: 'b584c517-6e9b-4062-8d9b-1091f4ceea2c',
0|curbe-admin  | 2025-12-04T16:25:51:   companyId: '6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7',
0|curbe-admin  | 2025-12-04T16:25:51:   planId: '76a608c5-9ca9-4603-afd3-313bf434bc54',
0|curbe-admin  | 2025-12-04T16:25:51:   status: 'trialing',
0|curbe-admin  | 2025-12-04T16:25:51:   billingCycle: 'monthly',
0|curbe-admin  | 2025-12-04T16:25:51:   trialStart: 2025-11-26T02:42:01.000Z,
0|curbe-admin  | 2025-12-04T16:25:51:   trialEnd: 2025-12-10T02:42:01.000Z,
0|curbe-admin  | 2025-12-04T16:25:51:   currentPeriodStart: 2025-11-26T02:42:02.906Z,
0|curbe-admin  | 2025-12-04T16:25:51:   currentPeriodEnd: 2025-12-26T02:42:02.906Z,
0|curbe-admin  | 2025-12-04T16:25:51:   stripeCustomerId: 'cus_TPIXa3OhTawP2G',
0|curbe-admin  | 2025-12-04T16:25:51:   stripeSubscriptionId: 'sub_1SXYg9Q3NUDhn1pZaSaTppKk',
0|curbe-admin  | 2025-12-04T16:25:51:   stripeLatestInvoiceId: 'in_1SXYg9Q3NUDhn1pZ4R3L6Ng8',
0|curbe-admin  | 2025-12-04T16:25:51:   createdAt: 2025-11-12T02:39:22.745Z,
0|curbe-admin  | 2025-12-04T16:25:51:   updatedAt: 2025-11-12T02:39:22.745Z,
0|curbe-admin  | 2025-12-04T16:25:51:   cancelledAt: null,
0|curbe-admin  | 2025-12-04T16:25:51:   cancelAtPeriodEnd: false
0|curbe-admin  | 2025-12-04T16:25:51: }
0|curbe-admin  | 2025-12-04T16:25:52: 4:25:52 PM [express] GET /api/billing/subscription 200 in 384ms :: {"subscription":{"id":"b584c517-6â€¦
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:25:52: 4:25:52 PM [express] GET /api/whatsapp/status 304 in 11ms :: {"success":true,"status":{"isReady":falâ€¦
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Cleared logged out status for company: 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Manual initialization requested for company: 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Creating new client for company: 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7
0|curbe-admin  | 2025-12-04T16:25:52: 4:25:52 PM [express] GET /api/notifications 304 in 24ms :: {"notifications":[{"id":"2656fe12-b7ff-49â€¦
0|curbe-admin  | 2025-12-04T16:25:52: 4:25:52 PM [express] GET /api/session 304 in 30ms :: {"user":{"id":"d994cb38-776f-40ea-80d1-2a355e12â€¦
0|curbe-admin  | 2025-12-04T16:25:52: 4:25:52 PM [express] GET /api/companies/6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7 304 in 7ms :: {"companyâ€¦
0|curbe-admin  | 2025-12-04T16:25:52: [WebSocket] Accepting authenticated connection for path: /ws/chat
0|curbe-admin  | 2025-12-04T16:25:52: [WebSocket] Authenticated: userId=d994cb38-776f-40ea-80d1-2a355e12819f, companyId=6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7, role=admin
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Cleaned up stale lock: .wwebjs_auth/6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7/session-6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7/SingletonLock
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Cleaned up stale lock: .wwebjs_auth/6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7/session-6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7/SingletonSocket
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Cleaned up stale lock: .wwebjs_auth/6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7/session-6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7/SingletonCookie
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Cleaned up stale lock: .wwebjs_auth/6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7/session-6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7/Local State
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Initialization attempt 1/3 for company: 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Attempt 1/3 failed for company 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7: Failed to launch the browser process! spawn /nix/store/qa9cnw4v5xkxyip6mb9kxqfq1z4x2dx1-chromium-138.0.7204.100/bin/chromium ENOENT
0|curbe-admin  | 2025-12-04T16:25:52: 
0|curbe-admin  | 2025-12-04T16:25:52: 
0|curbe-admin  | 2025-12-04T16:25:52: TROUBLESHOOTING: https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md
0|curbe-admin  | 2025-12-04T16:25:52: 
0|curbe-admin  | 2025-12-04T16:25:52: [WhatsApp] Waiting 2s before retry...
0|curbe-admin  | 2025-12-04T16:25:53: [WebSocket] Accepting authenticated connection for path: /ws/chat
0|curbe-admin  | 2025-12-04T16:25:53: [WebSocket] Authenticated: userId=d994cb38-776f-40ea-80d1-2a355e12819f, companyId=6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7, role=admin
0|curbe-admin  | 2025-12-04T16:25:54: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:25:54: 4:25:54 PM [express] GET /api/whatsapp/status 304 in 5ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-admin  | 2025-12-04T16:25:55: [WhatsApp] Initialization attempt 2/3 for company: 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7
0|curbe-admin  | 2025-12-04T16:25:55: [WhatsApp] Attempt 2/3 failed for company 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7: Failed to launch the browser process! spawn /nix/store/qa9cnw4v5xkxyip6mb9kxqfq1z4x2dx1-chromium-138.0.7204.100/bin/chromium ENOENT
0|curbe-admin  | 2025-12-04T16:25:55: 
0|curbe-admin  | 2025-12-04T16:25:55: 
0|curbe-admin  | 2025-12-04T16:25:55: TROUBLESHOOTING: https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md
0|curbe-admin  | 2025-12-04T16:25:55: 
0|curbe-admin  | 2025-12-04T16:25:55: [WhatsApp] Waiting 4s before retry...
0|curbe-admin  | 2025-12-04T16:25:55: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:25:55: 4:25:55 PM [express] GET /api/whatsapp/status 304 in 4ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-admin  | 2025-12-04T16:25:57: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:25:57: 4:25:57 PM [express] GET /api/whatsapp/status 304 in 7ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-admin  | 2025-12-04T16:25:59: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:25:59: 4:25:59 PM [express] GET /api/whatsapp/status 304 in 6ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-admin  | 2025-12-04T16:25:59: [WhatsApp] Initialization attempt 3/3 for company: 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7
0|curbe-admin  | 2025-12-04T16:26:00: [WhatsApp] Attempt 3/3 failed for company 6b8a1a6f-e604-4ab4-bc28-36feca0d7fc7: Failed to launch the browser process! spawn /nix/store/qa9cnw4v5xkxyip6mb9kxqfq1z4x2dx1-chromium-138.0.7204.100/bin/chromium ENOENT
0|curbe-admin  | 2025-12-04T16:26:00: 
0|curbe-admin  | 2025-12-04T16:26:00: 
0|curbe-admin  | 2025-12-04T16:26:00: TROUBLESHOOTING: https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md
0|curbe-admin  | 2025-12-04T16:26:00: 
0|curbe-admin  | 2025-12-04T16:26:00: [WhatsApp] Error initializing: Error: Failed to launch the browser process! spawn /nix/store/qa9cnw4v5xkxyip6mb9kxqfq1z4x2dx1-chromium-138.0.7204.100/bin/chromium ENOENT
0|curbe-admin  | 2025-12-04T16:26:00: 
0|curbe-admin  | 2025-12-04T16:26:00: 
0|curbe-admin  | 2025-12-04T16:26:00: TROUBLESHOOTING: https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md
0|curbe-admin  | 2025-12-04T16:26:00: 
0|curbe-admin  | 2025-12-04T16:26:00:     at onClose (/var/www/curbe/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserRunner.js:299:20)
0|curbe-admin  | 2025-12-04T16:26:00:     at ChildProcess.<anonymous> (/var/www/curbe/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserRunner.js:293:24)
0|curbe-admin  | 2025-12-04T16:26:00:     at ChildProcess.emit (node:events:524:28)
0|curbe-admin  | 2025-12-04T16:26:00:     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
0|curbe-admin  | 2025-12-04T16:26:00:     at onErrorNT (node:internal/child_process:483:16)
0|curbe-admin  | 2025-12-04T16:26:00:     at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
0|curbe-admin  | 2025-12-04T16:26:00: 4:26:00 PM [express] POST /api/whatsapp/init 500 in 7608ms :: {"success":false,"error":"Failed to inâ€¦
0|curbe-admin  | 2025-12-04T16:26:03: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:26:03: 4:26:03 PM [express] GET /api/whatsapp/status 304 in 6ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-admin  | 2025-12-04T16:26:06: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:26:06: 4:26:06 PM [express] GET /api/whatsapp/status 304 in 7ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-admin  | 2025-12-04T16:26:09: [WhatsApp] Status response: { status: 'disconnected', isReady: false, hasSavedSession: true }
0|curbe-admin  | 2025-12-04T16:26:09: 4:26:09 PM [express] GET /api/whatsapp/status 304 in 5ms :: {"success":true,"status":{"isReady":falsâ€¦
0|curbe-admin  | 2025-12-04T16:26:09: [WebSocket] Rejecting upgrade without valid session
0|curbe-admin  | 2025-12-04T16:26:09: [WebSocket] Rejecting upgrade without valid session