Last login: Fri Nov  7 19:56:48 on ttys001
test@adsl-71-145-228-134 ~ % ssh root@74.208.158.174

root@74.208.158.174's password: 
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-161-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Sat Nov  8 02:33:29 UTC 2025

  System load:  0.0                Processes:             206
  Usage of /:   0.6% of 620.08GB   Users logged in:       0
  Memory usage: 2%                 IPv4 address for ens6: 74.208.158.174
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm

New release '24.04.3 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Sat Nov  8 01:04:36 2025 from 71.145.228.134
root@ubuntu:~# cd /var/www/curbe
root@ubuntu:/var/www/curbe# git pull origin main
Username for 'https://github.com': cobertis
Password for 'https://cobertis@github.com': 
remote: Enumerating objects: 65, done.
remote: Counting objects: 100% (65/65), done.
remote: Compressing objects: 100% (16/16), done.
remote: Total 59 (delta 45), reused 57 (delta 43), pack-reused 0 (from 0)
Unpacking objects: 100% (59/59), 67.84 KiB | 1.15 MiB/s, done.
From https://github.com/cobertis/NewCurbeIO
 * branch            main       -> FETCH_HEAD
   0f2a13f..ab8711e  main       -> origin/main
Updating 0f2a13f..ab8711e
error: Your local changes to the following files would be overwritten by merge:
	package-lock.json
	package.json
Please commit your changes or stash them before you merge.
error: The following untracked working tree files would be overwritten by merge:
	ecosystem.config.cjs
Please move or remove them before you merge.
Aborting
root@ubuntu:/var/www/curbe# npm install

up to date, audited 697 packages in 2s

103 packages are looking for funding
  run `npm fund` for details

6 vulnerabilities (1 low, 5 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
root@ubuntu:/var/www/curbe# npm run build

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.20 building for production...
transforming (4) src/App.tsx
A PostCSS plugin did not pass the `from` option to `postcss.parse`. This may cause imported assets to be incorrectly transformed. If you've recently added a PostCSS plugin that raised this warning, please contact the package author to fix the issue.
âœ“ 2883 modules transformed.
../dist/public/index.html                                                 2.10 kB â”‚ gzip:   0.82 kB
../dist/public/assets/logo no fondo_1760450756816-BR-LiXG_.png           45.10 kB
../dist/public/assets/Generic_user_avatar_icon_55b842ef-BGsZDgwn.png    456.74 kB
../dist/public/assets/index-Bw_m-ZCj.css                                148.41 kB â”‚ gzip:  22.51 kB
../dist/public/assets/module-CzQsGpmH.js                                 77.13 kB â”‚ gzip:  27.74 kB
../dist/public/assets/native-B5Vb9Oiz.js                                380.35 kB â”‚ gzip:  82.06 kB
../dist/public/assets/index-DA35ZJp7.js                               2,728.48 kB â”‚ gzip: 666.48 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
âœ“ built in 9.86s
â–² [WARNING] Duplicate member "updatePolicyPlan" in class body [duplicate-class-member]

    server/storage.ts:5697:8:
      5697 â”‚   async updatePolicyPlan(planId: string, companyId: string, data: Partial<InsertPolicyPlan>): P...
           â•µ         ~~~~~~~~~~~~~~~~

  The original member "updatePolicyPlan" is here:

    server/storage.ts:4310:8:
      4310 â”‚   async updatePolicyPlan(id: string, selectedPlan: any): Promise<Policy | undefined> {
           â•µ         ~~~~~~~~~~~~~~~~

1 warning

  dist/index.js  1.1mb âš ï¸

âš¡ Done in 59ms
root@ubuntu:/var/www/curbe# pm2 restart curbe-admin
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [curbe-admin](ids: [ 0 ])
[PM2] [curbe-admin](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ curbe-admin        â”‚ fork     â”‚ 2    â”‚ online    â”‚ 0%       â”‚ 16.9mb   â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
root@ubuntu:/var/www/curbe# pm2 logs curbe-admin --lines 30

[TAILING] Tailing last 30 lines for [curbe-admin] process (change the value with --lines option)
/var/www/curbe/logs/pm2-err.log last 30 lines:
0|curbe-ad | 2025-11-08T02:34:00:   internalQuery: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   where: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   schema: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   table: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   column: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   dataType: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   constraint: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   file: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   line: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   routine: undefined,
0|curbe-ad | 2025-11-08T02:34:00:   sourceError: TypeError: fetch failed
0|curbe-ad | 2025-11-08T02:34:00:       at node:internal/deps/undici/undici:13510:13
0|curbe-ad | 2025-11-08T02:34:00:       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
0|curbe-ad | 2025-11-08T02:34:00:       at async execute (file:///var/www/curbe/node_modules/@neondatabase/serverless/index.mjs:1548:15)
0|curbe-ad | 2025-11-08T02:34:00:       at async NeonHttpPreparedQuery.execute (file:///var/www/curbe/node_modules/drizzle-orm/neon-http/session.js:40:20)
0|curbe-ad | 2025-11-08T02:34:00:       at async file:///var/www/curbe/dist/index.js:26834:30
0|curbe-ad | 2025-11-08T02:34:00:       at async Timeout._onTimeout (/var/www/curbe/node_modules/node-cron/dist/esm/scheduler/runner.js:70:44) {
0|curbe-ad | 2025-11-08T02:34:00:     [cause]: Error [ERR_TLS_CERT_ALTNAME_INVALID]: Hostname/IP does not match certificate's altnames: Host: localhost. is not in the cert's altnames: DNS:app.curbe.io
0|curbe-ad | 2025-11-08T02:34:00:         at Object.checkServerIdentity (node:tls:316:12)
0|curbe-ad | 2025-11-08T02:34:00:         at TLSSocket.onConnectSecure (node:_tls_wrap:1687:27)
0|curbe-ad | 2025-11-08T02:34:00:         at TLSSocket.emit (node:events:524:28)
0|curbe-ad | 2025-11-08T02:34:00:         at TLSSocket._finishInit (node:_tls_wrap:1076:8)
0|curbe-ad | 2025-11-08T02:34:00:         at ssl.onhandshakedone (node:_tls_wrap:862:12) {
0|curbe-ad | 2025-11-08T02:34:00:       code: 'ERR_TLS_CERT_ALTNAME_INVALID',
0|curbe-ad | 2025-11-08T02:34:00:       reason: "Host: localhost. is not in the cert's altnames: DNS:app.curbe.io",
0|curbe-ad | 2025-11-08T02:34:00:       host: 'localhost',
0|curbe-ad | 2025-11-08T02:34:00:       cert: [Object]
0|curbe-ad | 2025-11-08T02:34:00:     }
0|curbe-ad | 2025-11-08T02:34:00:   }
0|curbe-ad | 2025-11-08T02:34:00: }

/var/www/curbe/logs/pm2-out.log last 30 lines:
0|curbe-ad | 2025-11-08T02:24:08: 2:24:08 AM [express] GET /api/session 401 in 1ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:24:08: 2:24:08 AM [express] GET /api/session 401 in 0ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:24:47: [LOGIN-DEBUG] Login attempt for email: claudia@cobertisinsurance.com
0|curbe-ad | 2025-11-08T02:24:47: 2:24:47 AM [express] POST /api/login 400 in 8ms :: {"message":"Invalid request"}
0|curbe-ad | 2025-11-08T02:29:03: [LOGIN-DEBUG] Login attempt for email: claudia@cobertisinsurance.com
0|curbe-ad | 2025-11-08T02:29:03: 2:29:03 AM [express] POST /api/login 400 in 8ms :: {"message":"Invalid request"}
0|curbe-ad | 2025-11-08T02:29:24: 2:29:24 AM [express] GET /api/session 401 in 1ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:29:24: 2:29:24 AM [express] GET /api/session 401 in 1ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:29:24: 2:29:24 AM [express] GET /api/session 401 in 0ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:29:24: 2:29:24 AM [express] GET /api/session 401 in 1ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:29:37: [LOGIN-DEBUG] Login attempt for email: claudia@cobertisinsurance.com
0|curbe-ad | 2025-11-08T02:29:37: 2:29:37 AM [express] POST /api/login 400 in 7ms :: {"message":"Invalid request"}
0|curbe-ad | 2025-11-08T02:32:31: 2:32:31 AM [express] GET /api/session 401 in 1ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:32:31: 2:32:31 AM [express] GET /api/session 401 in 1ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:33:00: 2:33:00 AM [express] GET /api/session 401 in 0ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:33:00: 2:33:00 AM [express] GET /api/session 401 in 0ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:33:10: 2:33:10 AM [express] GET /api/session 401 in 1ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:33:11: 2:33:11 AM [express] GET /api/session 401 in 1ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:33:29: 2:33:29 AM [express] GET /api/session 401 in 1ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:33:29: 2:33:29 AM [express] GET /api/session 401 in 0ms :: {"message":"Not authenticated"}
0|curbe-ad | 2025-11-08T02:34:55: Email service initialized successfully
0|curbe-ad | 2025-11-08T02:34:55: Twilio service initialized successfully
0|curbe-ad | 2025-11-08T02:34:55: ==========================================
0|curbe-ad | 2025-11-08T02:34:55: ğŸ”‘ STRIPE INITIALIZED: TEST MODE
0|curbe-ad | 2025-11-08T02:34:55: ğŸ”‘ Key prefix: sk_test_51Rg...
0|curbe-ad | 2025-11-08T02:34:55: ==========================================
0|curbe-ad | 2025-11-08T02:34:55: [WebSocket] Server initialized on path /ws/chat
0|curbe-ad | 2025-11-08T02:34:55: 2:34:55 AM [express] serving on port 5000
0|curbe-ad | 2025-11-08T02:34:55: [REMINDER SCHEDULER] Starting scheduler...
0|curbe-ad | 2025-11-08T02:34:55: [REMINDER SCHEDULER] Scheduler started successfully

0|curbe-admin  | 2025-11-08T02:35:00: [REMINDER SCHEDULER] Error in scheduler: NeonDbError: Error connecting to database: fetch failed
0|curbe-admin  | 2025-11-08T02:35:00:     at execute (file:///var/www/curbe/node_modules/@neondatabase/serverless/index.mjs:1549:24)
0|curbe-admin  | 2025-11-08T02:35:00:     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
0|curbe-admin  | 2025-11-08T02:35:00:     at async NeonHttpPreparedQuery.execute (file:///var/www/curbe/node_modules/drizzle-orm/neon-http/session.js:40:20)
0|curbe-admin  | 2025-11-08T02:35:00:     at async file:///var/www/curbe/dist/index.js:26834:30
0|curbe-admin  | 2025-11-08T02:35:00:     at async Timeout._onTimeout (/var/www/curbe/node_modules/node-cron/dist/esm/scheduler/runner.js:70:44) {
0|curbe-admin  | 2025-11-08T02:35:00:   severity: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   code: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   detail: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   hint: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   position: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   internalPosition: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   internalQuery: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   where: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   schema: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   table: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   column: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   dataType: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   constraint: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   file: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   line: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   routine: undefined,
0|curbe-admin  | 2025-11-08T02:35:00:   sourceError: TypeError: fetch failed
0|curbe-admin  | 2025-11-08T02:35:00:       at node:internal/deps/undici/undici:13510:13
0|curbe-admin  | 2025-11-08T02:35:00:       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
0|curbe-admin  | 2025-11-08T02:35:00:       at async execute (file:///var/www/curbe/node_modules/@neondatabase/serverless/index.mjs:1548:15)
0|curbe-admin  | 2025-11-08T02:35:00:       at async NeonHttpPreparedQuery.execute (file:///var/www/curbe/node_modules/drizzle-orm/neon-http/session.js:40:20)
0|curbe-admin  | 2025-11-08T02:35:00:       at async file:///var/www/curbe/dist/index.js:26834:30
0|curbe-admin  | 2025-11-08T02:35:00:       at async Timeout._onTimeout (/var/www/curbe/node_modules/node-cron/dist/esm/scheduler/runner.js:70:44) {
0|curbe-admin  | 2025-11-08T02:35:00:     [cause]: Error [ERR_TLS_CERT_ALTNAME_INVALID]: Hostname/IP does not match certificate's altnames: Host: localhost. is not in the cert's altnames: DNS:app.curbe.io
0|curbe-admin  | 2025-11-08T02:35:00:         at Object.checkServerIdentity (node:tls:316:12)
0|curbe-admin  | 2025-11-08T02:35:00:         at TLSSocket.onConnectSecure (node:_tls_wrap:1687:27)
0|curbe-admin  | 2025-11-08T02:35:00:         at TLSSocket.emit (node:events:524:28)
0|curbe-admin  | 2025-11-08T02:35:00:         at TLSSocket._finishInit (node:_tls_wrap:1076:8)
0|curbe-admin  | 2025-11-08T02:35:00:         at ssl.onhandshakedone (node:_tls_wrap:862:12) {
0|curbe-admin  | 2025-11-08T02:35:00:       code: 'ERR_TLS_CERT_ALTNAME_INVALID',
0|curbe-admin  | 2025-11-08T02:35:00:       reason: "Host: localhost. is not in the cert's altnames: DNS:app.curbe.io",
0|curbe-admin  | 2025-11-08T02:35:00:       host: 'localhost',
0|curbe-admin  | 2025-11-08T02:35:00:       cert: [Object]
0|curbe-admin  | 2025-11-08T02:35:00:     }
0|curbe-admin  | 2025-11-08T02:35:00:   }
0|curbe-admin  | 2025-11-08T02:35:00: }
