Aqu√≠ vamos a dejarlo **CLAR√çSIMO**, Javier.
Esto es EXACTAMENTE lo que tu webphone necesita para conectarse a tu Asterisk/FreePBX usando **WebRTC + WSS**.

Piensa en esto como el ‚Äúusuario SIP especial para WebRTC‚Äù.

---

# ‚úÖ 1. **SERVIDOR (WSS)**

Tu servidor SIP WebRTC ES:

```
wss://pbx.curbe.io:8089/ws
```

Ese es el WebSocket seguro que Asterisk expone para WebRTC.

Ya lo tienes activo.

---

# ‚úÖ 2. **DOMAIN / REALM**

El dominio de autenticaci√≥n ES:

```
pbx.curbe.io
```

---

# ‚úÖ 3. **USERNAME (EXTENSI√ìN SIP)**

La extensi√≥n del agente.
Ejemplo:

```
301
```

---

# ‚úÖ 4. **PASSWORD (SIP SECRET / PJSIP PASSWORD)**

La clave SIP de la extensi√≥n.

Ejemplo:

```
nT8x4VK79Io9p3LZ
```

*(obvio, usa la real de la extensi√≥n que creaste)*

---

# ‚úÖ 5. **SIP URI**

Debe ponerse as√≠:

```
sip:301@pbx.curbe.io
```

---

# ‚ùó IMPORTANTE: EL WEBPHONE DEBE USAR WebRTC MODE

O sea, debe enviar y recibir as√≠:

* DTLS
* ICE/STUN
* RTP WebRTC compatible
* audio bidireccional desde el navegador

Si usas SIP.js, es autom√°tico.
Si usas JSSIP, debes activar el modo WebRTC.

---

# üéØ VARIABLES EXACTAS PARA TU PHONE.JS

P√≥nlas AS√ç MISMO:

```js
const SIP_USERNAME = "301";
const SIP_PASSWORD = "TU_PASSWORD_SIP";
const SIP_DOMAIN   = "pbx.curbe.io";
const WSS_SERVER   = "wss://pbx.curbe.io:8089/ws";
```

Y la construcci√≥n del UA (User Agent):

```js
const ua = new SIP.UA({
  uri: `sip:${SIP_USERNAME}@${SIP_DOMAIN}`,
  transportOptions: {
    wsServers: [WSS_SERVER]
  },
  authorizationUser: SIP_USERNAME,
  password: SIP_PASSWORD,
  sessionDescriptionHandlerFactoryOptions: {
    peerConnectionOptions: {
      rtcConfiguration: {
        iceServers: [
          { urls: "stun:stun.l.google.com:19302" }
        ]
      }
    }
  }
});
```

---

# üöÄ RESUMEN R√ÅPIDO PARA TI

| Dato                       | Valor                          |
| -------------------------- | ------------------------------ |
| **WebSocket Server (WSS)** | `wss://pbx.curbe.io:8089/ws`   |
| **SIP Domain / Realm**     | `pbx.curbe.io`                 |
| **SIP URI**                | `sip:<extension>@pbx.curbe.io` |
| **Username**               | extensi√≥n (301, 302, etc.)     |
| **Password**               | clave SIP de la extensi√≥n      |
| **STUN**                   | `stun:stun.l.google.com:19302` |
| **Codec recomendado**      | opus / ulaw                    |

---

# üìå Siguiente paso

Cuando tengas listo el HTML/JS del webphone que generaste, tr√°emelo aqu√≠ y:

* lo ajusto
* verifico que registre correctamente
* revisamos ICE/SDP
* verificamos que pueda **hacer y recibir llamadas reales**
* conecto todo con tu Asterisk paso a paso

Y listo: tus agentes tendr√°n un webphone moderno en tu CRM.
